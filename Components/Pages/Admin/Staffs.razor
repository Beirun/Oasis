@page "/staffs"
@rendermode InteractiveServer
@inject NavigationManager NavigationManager
@inject StaffService StaffService
@inject Initialization init
@using Oasis.Library
@using Oasis.Data.Object
<div class="w-screen min-h-screen flex flex-col justify-center bg-background">
    <div class="w-[85%] flex justify-between">
        <div class="flex">
            <Icon Name="Search" size="30px" Color="gray" Class="absolute ml-4 pointer-events-none focus:outline-none"/>
            <input type="text" name="name" placeholder="Search Staff" class="transition-all duration-300 focus:outline-none w-125 pl-15 text-lg p-2 px-4 rounded-md border-2 border-gray-300 focus:border-gray-500"/>
            <button class="flex justify-center items-center focus:outline-none border-2 border-gray-300 p-2 rounded-md px-6"> <Icon Name="Filter_List" Size="30px"/> Filter</button>
        </div>
        <button onclick="() => IsOpen = true" class="flex justify-center items-center text-white/90 p-2 pr-6 pl-4 rounded-md hover:bg-primary/80 hover:text-white/80 bg-primary transition-colors duration-300"><Icon Name="Add" size="30px" Class="focus:outline-none" Color="white" />Add New Staff</button>
    </div>
    <div class="w-[85%] flex flex-wrap justify-start h-[80%] ">
        @for (int i = 0; i < filteredStaffs.Count; i++)
        {
        var staff = filteredStaffs[i];
            <div class="h-75 w-90 bg-gray-200/40 rounded-xl @(i % 4 == 3 ? "": "mr-9") @(i % 4 != 0 ? "ml-3": "") my-4 shadow-gray-500/50 shadow-md">
            <div class="w-full flex p-4 h-20 mt-4">

                <div class="flex justify-center items-center size-20 bg-white/50 rounded-full overflow-hidden border-6 border-white shadow-sm shadow-gray-400/50">
                    <img class="size-full" src="@(staff.position == "HouseKeeper" ? "/housekeeper.png" : "/receptionist.png")"
                         alt="@($"{staff.position} Image")" />
                </div>
                <div class="flex flex-col items-start justify-center h-20 ">
                    <div class=" text-lg font-semibold w-full leading-none">@staff.user_fname  @staff.user_lname</div>
                    <div class=" text-md w-full leading-none text-primary">@staff.position</div>
                </div>
            </div>
            <div class="w-full px-4 pt-8 flex">
                <div class="font-bold">Email: </div>
                <div>
                    @staff.user_email
                </div>
            </div>
            <div class="w-full px-4 pt-4 flex">
                <div class="font-bold">Contact: </div>
                <div>
                    @staff.user_contactno
                </div>
            </div>

                <div class="w-full px-4 pt-4 flex">
                    <div class="font-bold">Hire Date: </div>
                    <div>
                        @staff.employment_date
                    </div>
                </div>
                <div class="w-full flex justify-end items-center h-10 mt-4 px-4"><button class="p-1 px-5  text-primary rounded-sm border-2 border-primary hover:bg-primary hover:border-transparent hover:text-white transition-all duration-300 cursor-pointer">Edit</button></div>
        </div>
        }
    </div>
    
</div>



@code {
    private bool IsOpen = false;

    private List<StaffInformation> staffs = new List<StaffInformation>();
    private List<StaffInformation> filteredStaffs = new List<StaffInformation>();

    protected override async Task OnInitializedAsync(){
        staffs = await StaffService.GetStaffs();
        filteredStaffs = staffs;
    }
}
